javascript: !function e(){try{if("trols.org.au"!==window.location.host&&("/nejta/results.php"===window.location.pathname||"/nejta/p_results.php"===window.location.pathname))return;let t=(window.prompt("Enter the club/team to get stats for:")||"").trim().toLowerCase();if(!t)return;let n=(window.prompt("Enter the name of the player to get stats for:")||"").trim().toLowerCase();if(!n)return;let l={name:n,team:t,singles:{wins:0,losses:0},doubles:{wins:0,losses:0}};l.name=l.name.split(" ").map(e=>e[0].toUpperCase()+e.substr(1)).join(" "),l.team=l.team.split(" ").map(e=>e[0].toUpperCase()+e.substr(1)).join(" ");let s=document.querySelector("body > table > tbody > tr > td > table"),o=s.children[0],r=Array.from(o.children),i=r.map(e=>e.children),a=[];for(let d=0;d<i.length;d++){let p=i[d];if(p[0].textContent.trim().toLowerCase()===t||p[p.length-1].textContent.trim().toLowerCase()===t){let c=p[0].children[0];if(c&&"onclick"in c&&c.onclick){let m=c.onclick.toString(),h=m.indexOf("'"),u=m.indexOf("'",h+1)-h-1,f=m.substr(h+1,u),b=m.indexOf("'",h+u+2)+1,C=m.indexOf("'",b+1)-b,y=m.substr(b,C);a.push(new Promise(function(e,t){let s=document.createElement("iframe");s.setAttribute("src",`match_popup.php?seasonid=${f}&matchid=${y}`),s.hidden=!0,s.addEventListener("load",function(){let t=s.contentWindow.document,o=t.getElementsByClassName("xs")[1],r=o.children[0],i=r.children[1],a=Array.from(i.children[0].querySelectorAll("tr")).map(e=>e.children[1].textContent.replace(/^\s*(\d*\.\s*)?|\s*$/g,"").toLowerCase()),d=Array.from(i.children[2].querySelectorAll("tr")).map(e=>e.children[1].textContent.replace(/^\s*(\d*\.\s*)?|\s*$/g,"").toLowerCase()),p=a.includes(n)?"home":"away",c=("home"===p?a.indexOf(n):d.indexOf(n))+1,m=Array.from(i.children[1].querySelectorAll("tr")).map(e=>Array.prototype.map.call(e.children,e=>e.textContent));for(let h=0;h<m.length;h++){let u=1===m[h][0].length;if("home"===p){if(m[h][0].includes(c)){let f="6"===m[h][1].split("-")[0];f?l[u?"singles":"doubles"].wins++:l[u?"singles":"doubles"].losses++}}else if(m[h][2].includes(c)){let b="6"===m[h][1].split("-")[1];b?l[u?"singles":"doubles"].wins++:l[u?"singles":"doubles"].losses++}}document.body.removeChild(s),e()}),document.body.append(s)}))}}}Promise.all(a).then(function(){for(;document.body.firstChild;)document.body.removeChild(document.body.lastChild);let e=document.createElement("h1");e.textContent="Player: "+l.name;let t=document.createElement("div"),n=document.createElement("h3");n.textContent="Singles";let s=document.createElement("p");s.textContent="Wins: "+l.singles.wins;let o=document.createElement("p");o.textContent="Losses: "+l.singles.losses,t.append(n),t.append(s),t.append(o);let r=document.createElement("div"),i=document.createElement("h3");i.textContent="Doubles";let a=document.createElement("p");a.textContent="Wins: "+l.doubles.wins;let d=document.createElement("p");d.textContent="Losses: "+l.doubles.losses,r.append(i),r.append(a),r.append(d),document.body.append(e),document.body.append(t),document.body.append(r)})}catch(g){console.error("An unexpected error occurred running TROLS NEJTA Slayer Stats Script:",g)}}();
